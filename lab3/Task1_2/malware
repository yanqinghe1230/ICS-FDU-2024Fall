#!/bin/sh
echo ""
pstree -a -l -p -s -H $$ $$

current_process=$$
found_bash_calc=false

while [ "$current_process" -ne 1 ]; do
    parent_process=$(ps -o ppid= -p $current_process)
    process_name=$(ps -o comm= -p $parent_process)
    
    if [ "$process_name" = "bash-calc" ]; then
        found_bash_calc=true
        break
    fi
    
    current_process=$parent_process
done

echo ""
if [ "$found_bash_calc" = true ]; then
    echo "### The bomb was triggered by the bash-calc process. ###"
    echo "### You have successfully detonated the bomb! Congratulations! ###"
else
    echo "### The bomb was NOT triggered by the bash-calc process. ###"
    echo "### You did NOT successfully detonate the bomb. ###"
fi
echo ""